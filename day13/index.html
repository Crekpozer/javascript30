<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slide in on scroll</title>
</head>
<body>
    <div class="site-wrap">
        <h1>Slide in on Scroll</h1>

        <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Cupiditate beatae deserunt odio amet dolores ipsa magni error veritatis minus possimus deleniti architecto, facere explicabo vero adipisci illo molestiae neque sequi!</p>
        <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ducimus perspiciatis temporibus, ex libero vel facere aspernatur dolorum mollitia labore totam? Ipsa, suscipit sint rem nulla quo quos hic quae quibusdam.Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quasi deleniti eveniet qui nihil vel tempora, et eaque quas nesciunt? Deleniti molestiae, dolor consequuntur illum quisquam laboriosam ea quo porro distinctio! Lorem ipsum dolor sit amet consectetur, adipisicing elit. Cupiditate beatae deserunt odio amet dolores ipsa magni error veritatis minus possimus deleniti architecto, facere explicabo vero adipisci illo molestiae neque sequi!</p>
        <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ducimus perspiciatis temporibus, ex libero vel facere aspernatur dolorum mollitia labore totam? Ipsa, suscipit sint rem nulla quo quos hic quae quibusdam.Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quasi deleniti eveniet qui nihil vel tempora, et eaque quas nesciunt? Deleniti molestiae, dolor consequuntur illum quisquam laboriosam ea quo porro distinctio!</p>

        <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestias quasi recusandae cum libero culpa voluptas corporis odio, doloribus laudantium, eum magni. Odit possimus, consequuntur laboriosam numquam perferendis aliquam provident explicabo. Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptatem praesentium voluptates facere ducimus veritatis unde distinctio esse nulla omnis optio, porro dolores hic? Cumque natus exercitationem atque qui impedit nobis? Lorem ipsum, dolor sit amet consectetur adipisicing elit. Molestiae, amet officiis voluptatibus, et fugit qui maiores possimus corrupti saepe accusamus fugiat veniam voluptatem laborum iure repudiandae placeat quos, culpa deserunt.</p>

        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Perspiciatis maxime cumque minima recusandae eum distinctio, rem amet a quod, obcaecati perferendis, inventore repudiandae harum illo earum soluta consectetur. Sed, animi.</p>

        <img src="http://unsplash.it/400/400" class="align-left slide-in">

        <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Doloribus exercitationem adipisci, deserunt recusandae saepe quisquam aspernatur similique earum incidunt quaerat suscipit modi veniam ratione accusamus repellendus eos soluta autem cum? Lorem ipsum dolor sit amet consectetur adipisicing elit. Quidem, veritatis corporis. Labore ipsa nesciunt quis ullam ex doloribus harum, est omnis ad cumque reprehenderit, facilis cupiditate mollitia facere illum totam!</p>

        <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ducimus perspiciatis temporibus, ex libero vel facere aspernatur dolorum mollitia labore totam? Ipsa, suscipit sint rem nulla quo quos hic quae quibusdam.Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quasi deleniti eveniet qui nihil vel tempora, et eaque quas nesciunt? Deleniti molestiae, dolor consequuntur illum quisquam laboriosam ea quo porro distinctio! Lorem ipsum dolor sit amet consectetur, adipisicing elit. Cupiditate beatae deserunt odio amet dolores ipsa magni error veritatis minus possimus deleniti architecto, facere explicabo vero adipisci illo molestiae neque sequi!</p>
        
        <img src="http://unsplash.it/400/401" class="align-right slide-in">

        <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestias quasi recusandae cum libero culpa voluptas corporis odio, doloribus laudantium, eum magni. Odit possimus, consequuntur laboriosam numquam perferendis aliquam provident explicabo. Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptatem praesentium voluptates facere ducimus veritatis unde distinctio esse nulla omnis optio, porro dolores hic? Cumque natus exercitationem atque qui impedit nobis? Lorem ipsum, dolor sit amet consectetur adipisicing elit. Molestiae, amet officiis voluptatibus, et fugit qui maiores possimus corrupti saepe accusamus fugiat veniam voluptatem laborum iure repudiandae placeat quos, culpa deserunt.</p>

        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Perspiciatis maxime cumque minima recusandae eum distinctio, rem amet a quod, obcaecati perferendis, inventore repudiandae harum illo earum soluta consectetur. Sed, animi.</p>

        <img src="http://unsplash.it/200/500" class="align-left slide-in">

        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aspernatur blanditiis unde, eveniet voluptatum tenetur minus veniam neque molestiae tempore doloribus aliquid. Eveniet eum incidunt eligendi tempora omnis corporis perferendis iure. Lorem ipsum, dolor sit amet consectetur adipisicing elit. Laborum et eum quia natus, cupiditate qui, voluptatem voluptatibus corrupti id consequatur hic, omnis eligendi quam architecto voluptatum quisquam facere quasi maiores?</p>

        <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ducimus perspiciatis temporibus, ex libero vel facere aspernatur dolorum mollitia labore totam? Ipsa, suscipit sint rem nulla quo quos hic quae quibusdam.Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quasi deleniti eveniet qui nihil vel tempora, et eaque quas nesciunt? Deleniti molestiae, dolor consequuntur illum quisquam laboriosam ea quo porro distinctio! Lorem ipsum dolor sit amet consectetur, adipisicing elit. Cupiditate beatae deserunt odio amet dolores ipsa magni error veritatis minus possimus deleniti architecto, facere explicabo vero adipisci illo molestiae neque sequi!</p>

        <img src="http://unsplash.it/400/400" class="align-right slide-in">

        <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestias quasi recusandae cum libero culpa voluptas corporis odio, doloribus laudantium, eum magni. Odit possimus, consequuntur laboriosam numquam perferendis aliquam provident explicabo. Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptatem praesentium voluptates facere ducimus veritatis unde distinctio esse nulla omnis optio, porro dolores hic? Cumque natus exercitationem atque qui impedit nobis? Lorem ipsum, dolor sit amet consectetur adipisicing elit. Molestiae, amet officiis voluptatibus, et fugit qui maiores possimus corrupti saepe accusamus fugiat veniam voluptatem laborum iure repudiandae placeat quos, culpa deserunt.</p>

        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Perspiciatis maxime cumque minima recusandae eum distinctio, rem amet a quod, obcaecati perferendis, inventore repudiandae harum illo earum soluta consectetur. Sed, animi.</p>

        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Ea, corrupti? Reiciendis, magnam eveniet! Officia autem facilis possimus incidunt temporibus obcaecati sunt quo, unde itaque fuga! Sapiente sit cum corrupti hic.</p>
    </div>

    <script>

        // Esse função faz com que a função só seja executada a cada intervalo de tempo
        // o intervalo padrão é 20 milisegundos
        function debounce(func, wait = 20, immediate = true) {
            var timeout;
            return function() {
                var context = this, args= arguments
                var later = function() {
                    timeout = null
                    if(!immediate) func.apply(context, args)
                }
                
                var callNow = immediate && !timeout
                clearTimeout(timeout)
                timeout = setTimeout(later, wait)
                if(callNow) func.apply(context, args)
            }
        }

        // Salva as imagens em um array
        const sliderImages = document.querySelectorAll('.slide-in')

        // Checa se a imagem já está na posição para aparecer
        function checkSlide(e){
            console.log(window.scrollY) // [DEBUG] Mostra no console qual a posição da tela 
            
            // Passa em cada imagem
            sliderImages.forEach(sliderImage => {
                
                // Pega o valor da metade da imagem
                const slideInAt = (window.scrollY + window.innerHeight) - sliderImage.height / 2
                
                // Pega o valor do fim da imagem
                const imageBottom = sliderImage.offsetTop + sliderImage.height

                // Pega o ponto da metade da imagem 
                const isHalfShown = slideInAt > sliderImage.offsetTop

                // Pega o ponto final da imagem
                const isNotScrolledPast = window.scrollY < imageBottom

                // Verifica se passou da metade da imagem e se a imagem já passou
                if(isHalfShown && isNotScrolledPast) {
                    
                    // Adiciona a classe 'active' para as imagens que estão aparecendo pelo menos a metade
                    sliderImage.classList.add('active')
                } else {
                    
                    // Remove a classe 'active' para as iamgens que já passaram
                    sliderImage.classList.remove('active')
                }
            })
        }

        window.addEventListener('scroll', debounce(checkSlide))
    </script>

    <style>
        html {
           box-sizing: border-box;
           background: #ffc600;
           font-family: Arial, Helvetica, sans-serif;
           font-size: 20px;
           font-weight: 200;
        }

        body {
            margin: 0;
        }

        *, *::before, *::after {
            box-sizing: inherit;
        }

        h1 {
            margin-top: 0;
        }

        .site-wrap {
            max-width: 700px;
            margin: 100px auto;
            background: white;
            padding: 40px;
            text-align: justify;
        }

        .align-left {
            float: left;
            margin-right: 20px;
        }

        .align-right {
            float: right;
            margin-left: 20px;
        }

        .slide-in {
            opacity: 0;
            transition: all .5s;
        }

        .align-left.slide-in {
            transform: translateX(-30%) scale(0.95);
        }

        .align-right.slide-in {
            transform: translate(30%) scale(0.95);
        }

        .slide-in.active {
            opacity: 1;
            transform: translateX(0%) scale(1);
        }
    </style>
</body>
</html>